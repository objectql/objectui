---
title: "ObjectGrid Migration Guide - view.zod Alignment"
description: "Guide for migrating ObjectGrid schemas to align with @objectstack/spec view.zod"
---

# ObjectGrid Migration Guide

## Overview

ObjectGrid has been refactored to align with the `@objectstack/spec` view.zod schema while maintaining **full backward compatibility** with existing code. This guide explains the new features and shows how to gradually adopt them.

## Key Changes

### 1. Enhanced Data Provider Support (ViewDataSchema)

**New Feature**: Explicit data provider configuration with three modes:

#### Provider: 'object' (ObjectStack Protocol)
```tsx
// NEW: Explicit object provider
{
  type: 'object-grid',
  objectName: 'users',
  data: {
    provider: 'object',
    object: 'users'
  }
}

// LEGACY: Still supported
{
  type: 'object-grid',
  objectName: 'users'
  // Implicitly uses object provider
}
```

#### Provider: 'value' (Static/Inline Data)
```tsx
// NEW: Explicit value provider
{
  type: 'object-grid',
  objectName: 'users',
  data: {
    provider: 'value',
    items: [
      { name: 'Alice', email: 'alice@example.com' },
      { name: 'Bob', email: 'bob@example.com' }
    ]
  }
}

// LEGACY: Still supported
{
  type: 'object-grid',
  objectName: 'users',
  staticData: [
    { name: 'Alice', email: 'alice@example.com' }
  ]
}
```

#### Provider: 'api' (Custom API Endpoints)
```tsx
// NEW: Custom API provider
{
  type: 'object-grid',
  objectName: 'users',
  data: {
    provider: 'api',
    read: {
      url: '/api/users',
      method: 'GET',
      headers: { 'Authorization': 'Bearer token' }
    },
    write: {
      url: '/api/users',
      method: 'POST'
    }
  }
}
```

### 2. Enhanced Column Configuration (ListColumn)

**New Feature**: Rich column configuration with alignment, width, and type.

```tsx
// NEW: Enhanced ListColumn objects
{
  columns: [
    {
      field: 'name',
      label: 'Full Name',
      width: 200,
      align: 'left',
      sortable: true,
      resizable: true,
      wrap: false,
      type: 'text'
    },
    {
      field: 'amount',
      label: 'Amount',
      width: 150,
      align: 'right',
      type: 'currency'
    }
  ]
}

// LEGACY: Still supported
{
  fields: ['name', 'amount']
}

// ALSO SUPPORTED: Simple string array
{
  columns: ['name', 'amount']
}
```

### 3. Structured Selection Configuration

**New Feature**: Nested selection configuration object.

```tsx
// NEW: SelectionConfig
{
  selection: {
    type: 'multiple'  // or 'single' or 'none'
  }
}

// LEGACY: Still supported
{
  selectable: 'multiple'
}
```

### 4. Structured Pagination Configuration

**New Feature**: Nested pagination configuration with page size options.

```tsx
// NEW: PaginationConfig
{
  pagination: {
    pageSize: 25,
    pageSizeOptions: [10, 25, 50, 100]
  }
}

// LEGACY: Still supported
{
  pageSize: 25,
  showPagination: true
}
```

### 5. Array-Based Sort Configuration

**New Feature**: Multi-column sort with structured array format.

```tsx
// NEW: Structured sort array
{
  sort: [
    { field: 'name', order: 'asc' },
    { field: 'created_at', order: 'desc' }
  ]
}

// ALSO SUPPORTED: String format
{
  sort: 'name desc'
}

// LEGACY: Still supported
{
  defaultSort: {
    field: 'name',
    order: 'asc'
  }
}
```

### 6. Array-Based Filter Configuration

**New Feature**: Structured filter rules with operators.

```tsx
// NEW: Structured filter array
{
  filter: [
    { field: 'status', operator: 'eq', value: 'active' },
    { field: 'age', operator: 'gt', value: 18 }
  ]
}

// LEGACY: Still supported
{
  defaultFilters: {
    status: 'active'
  }
}
```

### 7. Searchable Fields Configuration

**New Feature**: Explicitly define which fields are searchable.

```tsx
// NEW: Explicit searchable fields
{
  searchableFields: ['name', 'email', 'company']
}

// LEGACY: Still supported
{
  showSearch: true  // Searches all visible columns
}
```

### 8. Label vs Title

**New Feature**: `label` field for display names (aligned with view.zod).

```tsx
// NEW: Using label
{
  label: 'User Management'
}

// LEGACY: Still supported
{
  title: 'User Management'
}
```

### 9. Visual Enhancements

**New Feature**: Additional visual styling options.

```tsx
// NEW: Visual enhancements
{
  striped: true,    // Alternating row colors
  bordered: true,   // Cell borders
  resizable: true   // Column resizing (replaces resizableColumns)
}

// LEGACY: Still supported
{
  resizableColumns: true
}
```

## Migration Strategy

### No Action Required

All existing code will continue to work without changes. The component fully supports legacy fields.

### Gradual Migration (Recommended)

Adopt new features incrementally as you update your code:

#### Step 1: Update Data Configuration
```tsx
// Before
{
  type: 'object-grid',
  objectName: 'users',
  staticData: [...]
}

// After
{
  type: 'object-grid',
  objectName: 'users',
  data: {
    provider: 'value',
    items: [...]
  }
}
```

#### Step 2: Enhance Column Configuration
```tsx
// Before
{
  fields: ['name', 'email', 'status']
}

// After
{
  columns: [
    { field: 'name', label: 'Full Name', width: 200, align: 'left' },
    { field: 'email', label: 'Email Address', width: 250 },
    { field: 'status', label: 'Status', type: 'select', align: 'center' }
  ]
}
```

#### Step 3: Update Selection and Pagination
```tsx
// Before
{
  selectable: 'multiple',
  pageSize: 25,
  showPagination: true
}

// After
{
  selection: { type: 'multiple' },
  pagination: {
    pageSize: 25,
    pageSizeOptions: [10, 25, 50, 100]
  }
}
```

#### Step 4: Modernize Sort and Filter
```tsx
// Before
{
  defaultSort: { field: 'name', order: 'asc' },
  defaultFilters: { status: 'active' }
}

// After
{
  sort: [{ field: 'name', order: 'asc' }],
  filter: [{ field: 'status', operator: 'eq', value: 'active' }]
}
```

## Complete Example: Before and After

### Before (Legacy Schema)
```tsx
<ObjectGrid
  schema={{
    type: 'object-grid',
    objectName: 'contacts',
    title: 'Contact Management',
    fields: ['fullName', 'email', 'phone', 'status'],
    staticData: [
      { fullName: 'Alice', email: 'alice@example.com', phone: '555-1234', status: 'active' }
    ],
    selectable: 'multiple',
    pageSize: 25,
    showSearch: true,
    showPagination: true,
    defaultSort: { field: 'fullName', order: 'asc' },
    defaultFilters: { status: 'active' },
    resizableColumns: true,
    operations: {
      update: true,
      delete: true,
      export: true
    }
  }}
  dataSource={dataSource}
/>
```

### After (Modern Schema)
```tsx
<ObjectGrid
  schema={{
    type: 'object-grid',
    objectName: 'contacts',
    label: 'Contact Management',
    data: {
      provider: 'value',
      items: [
        { fullName: 'Alice', email: 'alice@example.com', phone: '555-1234', status: 'active' }
      ]
    },
    columns: [
      { field: 'fullName', label: 'Name', width: 200, align: 'left', sortable: true },
      { field: 'email', label: 'Email', width: 250, type: 'email' },
      { field: 'phone', label: 'Phone', width: 150, type: 'phone' },
      { field: 'status', label: 'Status', width: 120, align: 'center', type: 'select' }
    ],
    selection: { type: 'multiple' },
    pagination: {
      pageSize: 25,
      pageSizeOptions: [10, 25, 50, 100]
    },
    searchableFields: ['fullName', 'email', 'phone'],
    sort: [{ field: 'fullName', order: 'asc' }],
    filter: [{ field: 'status', operator: 'eq', value: 'active' }],
    resizable: true,
    striped: true,
    operations: {
      update: true,
      delete: true,
      export: true
    }
  }}
  dataSource={dataSource}
/>
```

## TypeScript Types

Import the new types for better type safety:

```tsx
import type { 
  ObjectGridSchema,
  ViewData,
  ListColumn,
  SelectionConfig,
  PaginationConfig,
  SortConfig
} from '@object-ui/types';

const schema: ObjectGridSchema = {
  type: 'object-grid',
  objectName: 'users',
  data: {
    provider: 'object',
    object: 'users'
  } as ViewData,
  columns: [
    { field: 'name', label: 'Name' }
  ] as ListColumn[],
  selection: { type: 'multiple' } as SelectionConfig,
  pagination: { pageSize: 25 } as PaginationConfig
};
```

## Benefits of Migration

1. **Standards Compliance**: Fully aligned with @objectstack/spec
2. **Future-Proof**: Ready for upcoming features (kanban, calendar, gantt views)
3. **Type Safety**: Enhanced TypeScript support
4. **Flexibility**: More control over column behavior and data sources
5. **Consistency**: Unified schema structure across ObjectStack ecosystem

## Support

- All legacy fields will continue to be supported
- No breaking changes in this release
- Migration is optional but recommended for new code

For questions or issues, please refer to:
- [ObjectGrid Documentation](/docs/plugins/plugin-object/object-grid)
- [GitHub Issues](https://github.com/objectstack-ai/objectui/issues)
